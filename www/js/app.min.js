angular.module("Pingce",["ngRoute","LocalStorageModule"]).config(["$routeProvider","$httpProvider","$locationProvider","localStorageServiceProvider","config",function(e,r,o,n,t){angular.forEach(t.interceptor,function(r){var o=r.replace(/_([0-9]|[a-z])/g,function(e){return e.split("_")[1].toUpperCase()});o+="Controller",e.when("/"+r,{templateUrl:"templates/"+r+".html",reloadOnSearch:!1,controller:o,resolve:{user:["$q","$location","localStorageService",function(e,o,n){var t=["account"],c=e.defer();return t.includes(r)&&!n.get("token")?(c.reject(),o.path("/signin").replace(),void 0):(c.resolve(),c.promise)}]}})}),e.otherwise("/index"),r.defaults.useXDomain=!0,r.defaults.withCredentials=!0,delete r.defaults.headers.common["X-Requested-With"],n.setStorageCookie(.02),r.interceptors.push("tokenInterceptor")}]).run(["appServices",function(e){e.init()}]),angular.module("Pingce").factory("utilServices",["$q",function(e){var r=function(e){var r;r=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var o=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(r.length),t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return new Blob([n],{type:o})},o=function(o){var n=e.defer(),t=document.createElement("img");try{var c=new FileReader;c.onload=function(e){t.src=e.target.result;var o=document.createElement("canvas"),c=o.getContext("2d");c.drawImage(t,0,0);var i=500,a=500,l=t.width,u=t.height;l>u?l>i&&(u*=i/l,l=i):u>a&&(l*=a/u,u=a),o.width=l,o.height=u;var c=o.getContext("2d");c.drawImage(t,0,0,l,u);var s=o.toDataURL("image/jpeg"),g=r(s);n.resolve(g)},c.readAsDataURL(o)}catch(i){n.resolve(i)}return n.promise};return{resizeFile:o}}]),angular.module("Pingce").factory("userServices",["$rootScope","$http","apiServices","localStorageService","config",function(e,r,o,n,t){return{rsa_key:o._get(angular.extend({},t.common_params,{url:"key/private_key.pem"})),signin:o._get(angular.extend({},t.common_params,{url:t.url+"api_url"})),signup:o._get(angular.extend({},t.common_params,{url:t.url+"api_url"})),forget:o._get(angular.extend({},t.common_params,{url:t.url+"api_url"})),reset:o._get(angular.extend({},t.common_params,{url:t.url+"api_url"})),get_smscode:o._get(angular.extend({},t.common_params,{url:t.url+"api_url"})),query_basicinfo:o._get(angular.extend({},t.common_params,{url:t.url+"api_url",token:n.get("token")})),realname_authen:o._get(angular.extend({},t.common_params,{url:t.url+"api_url",token:n.get("token")})),phone_authen:o._get(angular.extend({},t.common_params,{url:t.url+"api_url",token:n.get("token")})),like:o._get(angular.extend({},t.common_params,{url:t.url+"api_url",token:n.get("token")})),unlike:o._get(angular.extend({},t.common_params,{url:t.url+"api_url",token:n.get("token")})),query_messages:o._get(angular.extend({},t.common_params,{url:t.url+"api_url",token:n.get("token")})),query_message_by_id:o._get(angular.extend({},t.common_params,{url:t.url+"api_url",token:n.get("token")}))}}]),angular.module("Pingce").factory("tokenInterceptor",["$location","$q","localStorageService","errorServices","config",function(e,r,o,n,t){return{request:function(e){return e},requestError:function(){},response:function(n){var c=r.defer();return n.config.url.indexOf(".html")>0?n:n.data.code==t.request.TOKEN_INVALID?(console.log("TOKEN_INVALID"),o.remove("token"),e.path("/signIn").replace(),c.promise):n},responseError:function(e){var o=r.defer();return n.requestError(e.data,e.status,e.headers,e.config),o.promise}}}]),angular.module("Pingce").factory("toastServices",function(){return{show:function(){$(".toast").show()},hide:function(){$(".toast").hide()},start:function(){NProgress.start()},done:function(){NProgress.done()}}}),angular.module("Pingce").factory("facebookServices",["$rootScope","$route","$http","$window","$location","$q","userServices","toastServices","errorServices","localStorageService","config",function(e,r,o,n,t,c,i,a,l,u,s){return n.fbAsyncInit=function(){var e=n.FB||void 0;e&&e.init({appId:"217442991983314",xfbml:!0,version:"v2.6"})},{share:function(e){var o=n.FB||void 0;o&&o.ui({method:"feed",link:e||s.share.link,redirect_uri:e||s.share.link,caption:s.share.title},function(){r.reload()})},login:function(){var e=c.defer(),r=this;return r._facebook_connected().then(function(e){return e}).then(function(){r._query_facebook_user_info().then(function(r){e.resolve(r)})}),e.promise},logout:function(){var e=n.FB||void 0;e&&e.logout(function(){})},_facebook_connected:function(){var e=c.defer(),r=n.FB||void 0;return r?(a.show(),r.login(function(r){a.hide(),"connected"==r.status?e.resolve(r):e.reject("_facebook_connected occured")},{scope:"public_profile,email"}),e.promise):void 0},_query_facebook_user_info:function(){var e=c.defer(),r=n.FB||void 0;return r?(r.api("/me",{fields:"id,email,name,picture,gender,last_name"},function(r){!r||r.error?e.reject("_query_facebook_user_info error occured"):e.resolve(r)}),e.promise):void 0}}}]),angular.module("Pingce").factory("errorServices",["$rootScope","$timeout","toastServices",function(e,r,o){return{show:function(r){e.error_msg=r,$(".error-msg").show()},hide:function(){e.error_msg="",$(".error-msg").hide()},autoHide:function(o){e.error_msg=o,$(".error-msg").show(),r(function(){e.error_msg="",$(".error-msg").hide()},3e3)},requestError:function(e,r,n,t){switch(o.hide(),r){case 0:this.autoHide("连接超时");break;case 500:case 501:case 502:case 503:case 504:case 505:case 506:case 507:case 509:case 510:this.autoHide("服务器连接出错")}console.log("onRequestError output status, data, headers, config"),console.log(r),console.log(e),console.log(n),console.log(t),console.log("onRequestError end")}}}]),angular.module("Pingce").factory("appServices",["$rootScope","$window","$location","errorServices","toastServices","config",function(e,r,o,n,t,c){var i=function(){},a=function(e,r,o){t.hide(),n.hide(),u(e,r,o)},l=function(){},u=function(){};return{init:function(){e.$on("$routeChangeStart",i),e.$on("$routeChangeSuccess",a),e.$on("$routeChangeError",l),e.go=function(e){o.path(e)},e.back=function(){r.history.back()},e.staticImageUrl=c.imageUrl}}}]),angular.module("Pingce").factory("apiServices",["$http",function(e){return{_get:function(r){return function(o){return void 0!==r.token&&(r.token=localStorageService.get("token")),e({url:r.url,method:"GET",params:angular.extend({},r,o)}).then(function(e){return e.data})}},_post:function(r){return function(o){return void 0!==r.token&&(r.token=localStorageService.get("token")),e({url:r.url,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e){var r=[];for(var o in e)r.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return r.join("&")},data:angular.extend({},r,o)}).then(function(e){return e.data})}}}}]),angular.module("Pingce").directive("onRepeatDone",function(){return{restrict:"A",link:function(e,r){e.$last&&e.$emit("onRepeatDone",r)}}}),angular.module("Pingce").directive("onload",function(){return{restrict:"A",link:function(e,r){$(r).css({opacity:0}),$(r).bind("load",function(){$(r).css({opacity:1})})}}}),angular.module("Pingce").directive("mobilepicker",["$timeout",function(e){return{restrict:"E",scope:{options:"="},template:"<input type='text' name='picker' readonly ng-model='options.value'>",link:function(r,o){var n={beginyear:1950,endyear:(new Date).getFullYear(),days:["周日","周一","周二","周三","周四","周五","周六"],curdate:!1,theme:"date",event:"click",callBack:function(e){r.options.value=e.y+"-"+e.M+"-"+e.d}};e(function(){$(o).find("input").datePicker(angular.extend({},n,r.options))},0)}}}]),angular.module("Pingce").directive("imageview",["$timeout",function(e){return{restrict:"E",scope:{src:"=","default":"=?"},controller:["$scope","$element","$attrs",function(r,o,n){function t(e){$(e.target).css({width:"auto",height:"auto"});var o=$(e.target),n=o.width(),t=o.height(),c=parseFloat(n)/parseFloat(t);c<r.rate?(n=r.width,t=r.width/c,o.css({display:"inline-block",height:t,width:n,"margin-top":-(t-r.height)/2})):(t=r.height,n=t*c,o.css({display:"inline-block",height:t,width:n,"margin-left":-(n-r.width)/2})),o.parent().css({background:"none"}),o.css({visibility:"visible"})}function c(e){var o=$(e.target),n=o.width(),t=o.height(),c=parseFloat(n)/parseFloat(t);c<r.rate?o.css({display:"inline-block",height:"100%",width:"auto"}):o.css({display:"inline-block",height:"auto",width:"100%"}),o.parent().css({background:"none"}),o.css({visibility:"visible"})}return r.default_image=r.default||"../images/default.png",r.rate=parseFloat(r.$eval(n.rate)),r.width=o.parent().width()||$(window).width(),r.height=r.width/r.rate,r.rate?(this.show_center_on_loaded=function(r){t(r),e(function(){t(r)},100)},this.show_on_loaded=function(r){c(r),e(function(){c(r)},100)},void 0):(console.log("unexpect rate"),void 0)}],template:function(e){var r="<img ng-src='{{src}}' show-center-on-loaded err-src='{{default_image}}'>";return void 0==$(e).attr("center-only")&&(r="<img ng-src='{{src}}' show-on-loaded err-src='{{default_image}}'>"),r},link:function(e,r){var o={display:"block",width:e.width,overflow:"hidden","text-align":"center","background-image":"url("+e.default_image+")","background-position":"center center","background-repeat":"no-repeat",height:e.height,overflow:"hidden"};$(r).css(o)}}}]).directive("showOnLoaded",function(){return{restrict:"A",require:"^imageview",link:function(e,r,o,n){r.bind("load",n.show_on_loaded)}}}).directive("showCenterOnLoaded",function(){return{restrict:"A",require:"^imageview",link:function(e,r,o,n){r.bind("load",n.show_center_on_loaded)}}}),angular.module("Pingce").directive("dribehanceHeader",["$rootScope",function(e){return{restrict:"E",templateUrl:"templates/header.html",scope:{title:"=",backAction:"="},link:function(r){r.go=e.go}}}]),angular.module("Pingce").directive("dribehanceFooter",function(){return{restrict:"E",templateUrl:"templates/footer.html",scope:{active:"="},link:function(){}}}),angular.module("Pingce").directive("errSrc",function(){return{restrict:"A",link:function(e,r,o){$(r).bind("error",function(){$(r).attr("src",o.errSrc)})}}}),angular.module("Pingce").directive("countdown",["$interval",function(e){return{restrict:"E",scope:{countdown:"=",disabled:"=countdownDisabled"},link:function(r,o){function n(){var o=r.countdown.message,n=parseFloat(r.countdown.count)?parseFloat(r.countdown.count):60;t=!0,r.$apply(function(){r.countdown.message=n--,r.countdown.message=n+"s重新获取",r.countdown.mode="disabled",r.countdown.reset=!1,r.countdown.callback()});var c=e(function(){r.countdown.message=n--,r.countdown.message=n+"s重新获取",(0>n||r.countdown.reset)&&(e.cancel(c),r.countdown.message=o,t=!1)},1e3)}var t=!1;$(o).bind("click",function(){r.disabled||t||n()})}}}]),angular.module("Pingce").directive("confirm",function(){return{restrict:"E",scope:{confirm:"="},templateUrl:"templates/confirm.html",link:function(e,r){e.confirm=angular.extend({},{title:"Tips",content:"Are You Sure?",content_type:"content",open:function(){$(r).show()},cancel:function(){$(r).hide(),"function"==typeof e.confirm.cancle_callback&&e.confirm.cancle_callback()},ok:function(){$(r).hide(),"function"==typeof e.confirm.ok_callback&&(e.confirm.ok_callback(),e.confirm.content_type="content")}},e.confirm)}}}),angular.module("Pingce").directive("banner",function(){return{restrict:"E",transclude:!0,template:"<div class='carousel-holder owl-carousel theme' ng-transclude></div>",link:function(e,r){var o={autoplay:!0,items:1};o=angular.extend({},o,e.$eval($(r).attr("data-options")));var n=parseFloat(e.$eval($(r).attr("data-rate"))),t={display:"block",width:$(r).parent().width()||$(window).width(),height:($(r).parent().width()||$(window).width())/n};$(r).css(t),e.$on("onRepeatDone",function(){$(r).find(".carousel-holder").owlCarousel(o)})}}}),angular.module("Pingce").controller("vs4Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("vs3Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("vs2Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("vs1Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("toBeDistributorController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("taofangController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("supplierController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("signupController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("signinController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("serialController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("queryPriceController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("productController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("pingceController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("neimuController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("meController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("kongjianController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("jiajuController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("indexController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.banners=["../images/signin_bg.jpg","../images/consult_bg.jpg","../images/feedback_bg.jpg"]}]),angular.module("Pingce").controller("imageGroupController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("forgetController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("feedbackController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("distributorController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("createCommentController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("contactController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("commentController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("categoryInfoController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("categoryController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("brandController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").controller("articleController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Pingce").constant("config",{url:"http://",imageUrl:"http://",request:{SUCCESS:"200",TOKEN_INVALID:"405"},response:{SUCCESS:1},common_params:{},interceptor:["index","pingce","neimu","jiaju","contact","category","category_info","article","signin","signup","forget","query_price","feedback","vs_1","vs_2","vs_3","vs_4","create_comment","me","supplier","distributor","comment","to_be_distributor","image_group","brand","serial","taofang","kongjian","product"]});
//# sourceMappingURL=app.min.js.map
